<div class="title"><h1>Transactions</h1></div>
<div class="tableContainer">
    <div class="border">
        <table>
            <thead>
                <tr>
                    <th>Date</th>
                    <th>Amount</th>
                    <th>Bank</th>
                    <th>Transaction Memo</th>
                    <th>Transaction Type</th>
                    <th>Budget Item</th>
                </tr>
            </thead>
            <tbody>
                {{ range .TransactionsData }}
                <tr>
                    <td>{{ formatDate .Transaction.TransactionDate }}</td>
                    <td>R {{ formatPrice .Transaction.TransactionAmount }}</td>
                    <td>{{ .Transaction.BankName }}</td>
                    <td> 
                        {{if .Transaction.TransactionName}}
                        {{.Transaction.TransactionName}}
                        {{else}}
                        {{.Transaction.TransactionMemo}}
                        {{end}}</td>
                    <td>
                        {{ $currentTransaction := .Transaction }} <!-- Keep a reference to the current Transaction -->
                        <select name="transactionTypeID" id="transactionTypeSelect" hx-post="/transactions/{{ .Transaction.ID }}/transactionstypes/add" hx-trigger="change">
                            <option value="" disabled selected>Select</option>
                            {{ range .TransactionTypes }}
                            <option value="{{ .ID }}" {{ if eq .ID $currentTransaction.TransactionTypeID }}selected{{ end }}>{{ .Title }}</option>
                            {{ end }}
                        </select>
                    </td>
                    <td>
                        <select name="" id="">
                            <option value="income">Food</option>
                            <option value="expense">Clothing</option>
                            <option value="expense">Entertainment</option>
                            <option value="expense">Transport</option>
                            <option value="expense">Medical</option>
                            <option value="expense">Insurance</option>
                            <option value="expense">Utilities</option>
                            <option value="expense">Rent</option>
                            <option value="expense">Other</option>
                        </select>
                    </td>
                </tr>
                {{ end }}
            </tbody>
        </table>
    </div>
    
    <h2>Add Transaction</h2>
    
    <form>
        <label for="date">Date:</label>
        <input type="date" id="date" name="date">
    
        <label for="amount">Amount:</label>
        <input type="number" id="amount" name="amount">
    
        <label for="type">Type:</label>
        <select id="type" name="type">
            <option value="income">Income</option>
            <option value="expense">Expense</option>
        </select>
    
        <button type="submit">Add</button>
    </form>
</div>